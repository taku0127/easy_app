import{Sound}from"./sound.js";class Breathing{constructor(t,i,s){this.animation=t,this.times=i,this.minutes=6e4*s,this.totalTime(),this.sounds={start:new Sound("sine",.2,600),hold:new Sound("sine",.2,400),end:new Sound("sine",.2,300)},this.interval=null,this.inhaleTimeout=null,this.holdTimeout=null}start(){this.stop(),this.cycle(),this.interval=setInterval(()=>{this.cycle()},this.totalTime),setTimeout(()=>{clearInterval(this.interval)},this.minutes)}cycle(){this.sounds.start.playSound(),this.animation.bigger(this.times.inhale),this.inhaleTimeout=setTimeout(()=>{this.sounds.hold.playSound(),this.holdTimeout=setTimeout(()=>{this.sounds.end.playSound(),this.animation.smaller(this.times.exhale)},this.times.hold)},this.times.inhale)}stop(){clearInterval(this.interval),clearInterval(this.inhaleTimeout),clearInterval(this.holdTimeout),this.animation.smaller(this.times.exhale)}totalTime(){let i=0;Object.values(this.times).forEach(t=>{i+=t}),this.totalTime=i}}export{Breathing};